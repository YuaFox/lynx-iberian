<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lynx-Iberian</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>
<div class="container py-4">
    <h1 class="display-1 text-center">Lynx</h1>

    <button id="tw-button" class="btn btn-primary" onclick="openTwitter()">Login with Twitter</button>
    <input type="text" class="form-control d-none" id="input-pin" placeholder="Enter pin...">
    <button id="tw-pin" class="btn btn-primary d-none" onclick="confirmTwitter()">Submit</button>
</div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    /* Just a demo pls dont look the horrible code */
    function openTwitter(){
        axios({
            method: "post",
            url: "/api/v1/accounts/twitter/createLogin"
        }).then(function (response) {
            console.log(response)
            window.open(response.data, '_blank').focus()

            let d = document.getElementById("tw-button")
            d.className += " d-none"

            const el = document.querySelector('#input-pin')
            el.classList.remove("d-none")
            const el2 = document.querySelector('#tw-pin')
            el2.classList.remove("d-none")
        });
    }

    function confirmTwitter(){
    alert(document.getElementById('input-pin').value)
        axios({
            method: "post",
            url: "/api/v1/accounts/twitter/confirmLogin",
            params: {
                pin: document.getElementById('input-pin').value
            }
        }).then(function (response) {
            console.log(response)
            alert("Login done! Now you can post with the bot!")
        });
    }
    </script>

</body>
</html>